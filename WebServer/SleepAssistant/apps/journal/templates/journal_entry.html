{% extends "phone_base.html" %}

{% block title %}
Sleep Journal
{% endblock %}

{% block navheader %}
Sleep Journal
{% endblock %}

{% load humanize %}
{% block content %}
    <!--<div id="vertical-center" class="small-12 columns">-->
    <div class="small-12 columns">
            <h3 class="subheader text-center">Journal: <a href="#"><strong>{{ date }}</strong></a></h3>
            <hr>

            {% if record != None %}
                <h4 class="subheader">
                    <div class="small-10 columns text-center">

                        <div class="row">
                            <div class="small-6 columns text-right">Went to bed at:</div>
                            <div class="small-6 columns">
                                {% if record.in_bed %}
                                    {{ record.in_bed.time }} [{{ record.in_bed.date|naturalday }}]
                                {% else %}
                                    --
                                {% endif %}
                            </div>
                        </div>

                        <div class="row">
                            <div class="small-6 columns text-right">Fell asleep at:</div>
                            <div class="small-6 columns">
                                {% if record.fall_asleep %}
                                    {{ record.fall_asleep.time }} [{{ record.fall_asleep.date|naturalday }}]
                                {% else %}
                                    --
                                {% endif %}
                            </div>
                        </div>

                        <div class="row">
                            <div class="small-6 columns text-right">Woke up at:</div>
                            <div class="small-6 columns">
                                {% if record.wake_up %}
                                    {{ record.wake_up.time }} [{{ record.wake_up.date|naturalday }}]
                                {% else %}
                                    --
                                {% endif %}
                            </div>
                        </div>

                        <div class="row">
                            <div class="small-6 columns text-right">Left bed at:</div>
                            <div class="small-6 columns">
                                {% if record.out_bed %}
                                    {{ record.out_bed.time }} [{{ record.out_bed.date|naturalday }}]
                                {% else %}
                                    --
                                {% endif %}
                            </div>
                        </div>

                        <hr>

                        <div class="row">
                            <div class="small-6 columns text-right">Hours awake at night:</div>
                            <div class="small-6 columns">
                                {% if record.awake_hours %}
                                    {{ record.awake_hours|floatformat:2|intcomma }} 
                                    {% if record.awake_hours == 1 %}hour{% else %}hours{% endif %}
                                {% else %}
                                    --
                                {% endif %}
                            </div>
                        </div>

                        <div class="row">
                            <div class="small-6 columns text-right">Morning Grogginess:</div>
                            <div class="small-6 columns">
                                {% if record.grogginess %}
                                    {{ record.grogginess|floatformat:2|intcomma }} 
                                    {% if record.grogginess == 1 %}minute{% else %}minutes{% endif %}
                                {% else %}
                                    --
                                {% endif %}
                            </div>
                        </div>

                        <hr>
                        
                        <div class="row">
                            <div class="small-6 columns text-right">Hours spent napping:</div>
                            <div class="small-6 columns">
                                {% if record.napping_hours %}
                                    {{ record.napping_hours|floatformat:2|intcomma }} 
                                    {% if record.napping_hours == 1 %}hour{% else %}hours{% endif %}
                                {% else %}
                                    --
                                {% endif %}
                            </div>
                        </div>

                        <hr>
                        
                        <div class="row">
                            <div class="small-6 columns text-right">Time awake in bed (calculated):</div>
                            <div class="small-6 columns">
                                {% if record.time_awake_in_bed %}
                                    {{ record.time_awake_in_bed|floatformat:2|intcomma }} 
                                    {% if record.time_awake_in_bed == 1 %}hour{% else %}hours{% endif %}
                                {% else %}
                                    --
                                {% endif %}
                            </div>
                        </div>

                        <div class="row">
                            <div class="small-6 columns text-right">Time asleep at night (calculated):</div>
                            <div class="small-6 columns">
                                {% if record.time_asleep_at_night %}
                                    {{ record.time_asleep_at_night|floatformat:2|intcomma }} 
                                    {% if record.time_asleep_at_night == 1 %}hour{% else %}hours{% endif %}
                                {% else %}
                                    --
                                {% endif %}
                            </div>
                        </div>

                        <div class="row">
                            <div class="small-6 columns text-right">Total asleep time (calculated):</div>
                            <div class="small-6 columns">
                                {% if record.total_time_asleep %}
                                    {{ record.total_time_asleep|floatformat:2|intcomma }} 
                                    {% if record.total_time_asleep == 1 %}hour{% else %}hours{% endif %}
                                {% else %}
                                    --
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </h4>
            {% endif %}


            <div class="small-12 columns text-center vertical-space">
                <ul class="button-group even-3">
                    <!-- TODO: next_id / prev_id == None or 0 -->
                    {% if prev_date == None %}
                        <li><a href="#" class="disabled button">--</a></li>    
                    {% else %}
                        <li><a href="{% url 'journal_entry' prev_date.year prev_date.month prev_date.day %}" class="button">{{ prev_date }}</a></li>
                    {% endif %}
                    {% if record == None %}
                        <li><a href="{% url 'update_journal_entry' date.year date.month date.day %}" class="button secondary">Create</a></li>
                    {% else %}
                        <li><a href="{% url 'update_journal_entry' date.year date.month date.day %}" class="button secondary">Edit</a></li>
                    {% endif %}
                    {% if next_date == None %}
                        <li><a href="#" class="disabled button">--</a></li>
                    {% else %}
                        <li><a href="{% url 'journal_entry' next_date.year next_date.month next_date.day %}" class="button">{{ next_date }}</a></li>
                    {% endif %}
                </ul>
            </div>
    </div>
{% endblock %}

{% load staticfiles %}
{% block css %}
    <link rel="stylesheet" href="{% static 'css/layout.css' %}" />
{% endblock %}
{% block javascript %}
    <script src="{% static 'js/layout.js' %}"></script>
{% endblock %}
